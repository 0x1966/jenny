#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const yargs_1 = require("yargs");
const helpers_1 = require("yargs/helpers");
const config_1 = require("./config");
const output_1 = require("./output");
const command_1 = require("./command");
const DEFAULT_CONFIG_FILE = './.jennyconf.yaml';
const config = (0, config_1.configFromArgs)((configFilename, error) => (0, output_1.printWarning)(`error loading "${configFilename}"`, error));
(0, yargs_1.default)((0, helpers_1.hideBin)(process.argv))
    .command('delete [path]', 'delete jenkins jobs and views according to given path', (yargs) => yargs.positional('path', {
    describe: 'path to look for Jenkinsfiles',
    type: 'string',
}), (argv) => command_1.Command.of(config(argv)).deleteJobsAndViewsBasedOnPath(argv.path))
    .command('sync [path]', 'one-time sync jenkins jobs and views according to given path', (yargs) => yargs.positional('path', {
    describe: 'path to look for Jenkinsfiles',
    type: 'string',
}), (argv) => command_1.Command.of(config(argv)).syncJobsAndViewsBasedOnPath(argv.path))
    .command('watch [path]', 'watch given path and continuously sync jenkins jobs and views according to file changes', (yargs) => yargs.positional('path', {
    describe: 'path to look for Jenkinsfiles',
    type: 'string',
}), (argv) => command_1.Command.of(config(argv)).watchAndSyncJobsAndViewsBasedOnPath(argv.path))
    .option('configFile', {
    type: 'string',
    default: DEFAULT_CONFIG_FILE,
    description: 'Config file (Yaml)',
})
    .option('baseUrl', {
    type: 'string',
    default: undefined,
    description: 'Jenkins Base URL',
})
    .option('user', {
    type: 'string',
    default: undefined,
    description: 'Jenkins username',
})
    .option('token', {
    type: 'string',
    default: undefined,
    description: 'Jenkins authentication token',
})
    .option('jobTemplate', {
    type: 'string',
    default: undefined,
    description: 'the pipeline job template to clone, when creating new jobs',
})
    .option('namePrefix', {
    type: 'string',
    default: undefined,
    description: 'the name prefix to use when naming jobs and views based on directories',
})
    .parse();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsaUNBQXlCO0FBQ3pCLDJDQUFxQztBQUVyQyxxQ0FBdUM7QUFDdkMscUNBQXFDO0FBQ3JDLHVDQUFpQztBQUVqQyxNQUFNLG1CQUFtQixHQUFHLG1CQUFtQixDQUFBO0FBRS9DLE1BQU0sTUFBTSxHQUFHLElBQUEsdUJBQWMsRUFBQyxDQUFDLGNBQWMsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUEscUJBQVksRUFBQyxrQkFBa0IsY0FBYyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQTtBQUVsSCxJQUFBLGVBQUssRUFBQyxJQUFBLGlCQUFPLEVBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3pCLE9BQU8sQ0FDTixlQUFlLEVBQ2YsdURBQXVELEVBQ3ZELENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FDUixLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRTtJQUN2QixRQUFRLEVBQUUsK0JBQStCO0lBQ3pDLElBQUksRUFBRSxRQUFRO0NBQ2YsQ0FBQyxFQUNKLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxpQkFBTyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsSUFBYyxDQUFDLENBQ3RGO0tBQ0EsT0FBTyxDQUNOLGFBQWEsRUFDYiw4REFBOEQsRUFDOUQsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUNSLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO0lBQ3ZCLFFBQVEsRUFBRSwrQkFBK0I7SUFDekMsSUFBSSxFQUFFLFFBQVE7Q0FDZixDQUFDLEVBQ0osQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLGlCQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxJQUFjLENBQUMsQ0FDcEY7S0FDQSxPQUFPLENBQ04sY0FBYyxFQUNkLHlGQUF5RixFQUN6RixDQUFDLEtBQUssRUFBRSxFQUFFLENBQ1IsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7SUFDdkIsUUFBUSxFQUFFLCtCQUErQjtJQUN6QyxJQUFJLEVBQUUsUUFBUTtDQUNmLENBQUMsRUFDSixDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsaUJBQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsbUNBQW1DLENBQUMsSUFBSSxDQUFDLElBQWMsQ0FBQyxDQUM1RjtLQXNMQSxNQUFNLENBQUMsWUFBWSxFQUFFO0lBQ3BCLElBQUksRUFBRSxRQUFRO0lBQ2QsT0FBTyxFQUFFLG1CQUFtQjtJQUM1QixXQUFXLEVBQUUsb0JBQW9CO0NBQ2xDLENBQUM7S0FDRCxNQUFNLENBQUMsU0FBUyxFQUFFO0lBQ2pCLElBQUksRUFBRSxRQUFRO0lBQ2QsT0FBTyxFQUFFLFNBQVM7SUFDbEIsV0FBVyxFQUFFLGtCQUFrQjtDQUNoQyxDQUFDO0tBQ0QsTUFBTSxDQUFDLE1BQU0sRUFBRTtJQUNkLElBQUksRUFBRSxRQUFRO0lBQ2QsT0FBTyxFQUFFLFNBQVM7SUFDbEIsV0FBVyxFQUFFLGtCQUFrQjtDQUNoQyxDQUFDO0tBQ0QsTUFBTSxDQUFDLE9BQU8sRUFBRTtJQUNmLElBQUksRUFBRSxRQUFRO0lBQ2QsT0FBTyxFQUFFLFNBQVM7SUFDbEIsV0FBVyxFQUFFLDhCQUE4QjtDQUM1QyxDQUFDO0tBQ0QsTUFBTSxDQUFDLGFBQWEsRUFBRTtJQUNyQixJQUFJLEVBQUUsUUFBUTtJQUNkLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLFdBQVcsRUFBRSw0REFBNEQ7Q0FDMUUsQ0FBQztLQUNELE1BQU0sQ0FBQyxZQUFZLEVBQUU7SUFDcEIsSUFBSSxFQUFFLFFBQVE7SUFDZCxPQUFPLEVBQUUsU0FBUztJQUNsQixXQUFXLEVBQUUsd0VBQXdFO0NBQ3RGLENBQUM7S0FDRCxLQUFLLEVBQUUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCB5YXJncyBmcm9tICd5YXJncydcbmltcG9ydCB7aGlkZUJpbn0gZnJvbSAneWFyZ3MvaGVscGVycydcblxuaW1wb3J0IHtjb25maWdGcm9tQXJnc30gZnJvbSAnLi9jb25maWcnXG5pbXBvcnQge3ByaW50V2FybmluZ30gZnJvbSAnLi9vdXRwdXQnXG5pbXBvcnQge0NvbW1hbmR9IGZyb20gJy4vY29tbWFuZCdcblxuY29uc3QgREVGQVVMVF9DT05GSUdfRklMRSA9ICcuLy5qZW5ueWNvbmYueWFtbCdcblxuY29uc3QgY29uZmlnID0gY29uZmlnRnJvbUFyZ3MoKGNvbmZpZ0ZpbGVuYW1lLCBlcnJvcikgPT4gcHJpbnRXYXJuaW5nKGBlcnJvciBsb2FkaW5nIFwiJHtjb25maWdGaWxlbmFtZX1cImAsIGVycm9yKSlcblxueWFyZ3MoaGlkZUJpbihwcm9jZXNzLmFyZ3YpKVxuICAuY29tbWFuZChcbiAgICAnZGVsZXRlIFtwYXRoXScsXG4gICAgJ2RlbGV0ZSBqZW5raW5zIGpvYnMgYW5kIHZpZXdzIGFjY29yZGluZyB0byBnaXZlbiBwYXRoJyxcbiAgICAoeWFyZ3MpID0+XG4gICAgICB5YXJncy5wb3NpdGlvbmFsKCdwYXRoJywge1xuICAgICAgICBkZXNjcmliZTogJ3BhdGggdG8gbG9vayBmb3IgSmVua2luc2ZpbGVzJyxcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICB9KSxcbiAgICAoYXJndikgPT4gQ29tbWFuZC5vZihjb25maWcoYXJndikpLmRlbGV0ZUpvYnNBbmRWaWV3c0Jhc2VkT25QYXRoKGFyZ3YucGF0aCBhcyBzdHJpbmcpLFxuICApXG4gIC5jb21tYW5kKFxuICAgICdzeW5jIFtwYXRoXScsXG4gICAgJ29uZS10aW1lIHN5bmMgamVua2lucyBqb2JzIGFuZCB2aWV3cyBhY2NvcmRpbmcgdG8gZ2l2ZW4gcGF0aCcsXG4gICAgKHlhcmdzKSA9PlxuICAgICAgeWFyZ3MucG9zaXRpb25hbCgncGF0aCcsIHtcbiAgICAgICAgZGVzY3JpYmU6ICdwYXRoIHRvIGxvb2sgZm9yIEplbmtpbnNmaWxlcycsXG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgfSksXG4gICAgKGFyZ3YpID0+IENvbW1hbmQub2YoY29uZmlnKGFyZ3YpKS5zeW5jSm9ic0FuZFZpZXdzQmFzZWRPblBhdGgoYXJndi5wYXRoIGFzIHN0cmluZyksXG4gIClcbiAgLmNvbW1hbmQoXG4gICAgJ3dhdGNoIFtwYXRoXScsXG4gICAgJ3dhdGNoIGdpdmVuIHBhdGggYW5kIGNvbnRpbnVvdXNseSBzeW5jIGplbmtpbnMgam9icyBhbmQgdmlld3MgYWNjb3JkaW5nIHRvIGZpbGUgY2hhbmdlcycsXG4gICAgKHlhcmdzKSA9PlxuICAgICAgeWFyZ3MucG9zaXRpb25hbCgncGF0aCcsIHtcbiAgICAgICAgZGVzY3JpYmU6ICdwYXRoIHRvIGxvb2sgZm9yIEplbmtpbnNmaWxlcycsXG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgfSksXG4gICAgKGFyZ3YpID0+IENvbW1hbmQub2YoY29uZmlnKGFyZ3YpKS53YXRjaEFuZFN5bmNKb2JzQW5kVmlld3NCYXNlZE9uUGF0aChhcmd2LnBhdGggYXMgc3RyaW5nKSxcbiAgKVxuICAvLyAuY29tbWFuZChcbiAgLy8gICAnbGlzdC1qb2JzIFt2aWV3XScsXG4gIC8vICAgJ2xpc3Qgam9icycsXG4gIC8vICAgKHlhcmdzKSA9PiB7XG4gIC8vICAgICByZXR1cm4geWFyZ3MucG9zaXRpb25hbCgndmlldycsIHtcbiAgLy8gICAgICAgZGVzY3JpYmU6ICdzZWxlY3Qgam9icyBpbiB2aWV3JyxcbiAgLy8gICAgICAgdHlwZTogJ3N0cmluZycsXG4gIC8vICAgICB9KVxuICAvLyAgIH0sXG4gIC8vICAgKGFyZ3YpID0+IHtcbiAgLy8gICAgIGNvbnN0IGZldGNoID0gYXJndi52aWV3ID8gZmV0Y2hKb2JzSW5WaWV3KGFyZ3YudmlldykgOiBmZXRjaEFsbEpvYnMoKVxuICAvLyAgICAgZmV0Y2goaG9zdEFuZENyZWRlbnRpYWxzKGFyZ3YpKVxuICAvLyAgICAgICAudGhlbigoam9icykgPT4gam9icy5mb3JFYWNoKChqb2IpID0+IHByaW50bG4oYCR7am9iLm5hbWV9YCkpKVxuICAvLyAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4gcHJpbnRFcnJvcihyZWFzb24pKVxuICAvLyAgIH0sXG4gIC8vIClcbiAgLy8gLmNvbW1hbmQoXG4gIC8vICAgJ2NyZWF0ZS1saXN0LXZpZXcgW3ZpZXduYW1lXSBbdmlld3JlZ2V4XScsXG4gIC8vICAgJ2NyZWF0ZSBhIHJlZ2V4LWJhc2VkIGxpc3QgdmlldycsXG4gIC8vICAgKHlhcmdzKSA9PiB7XG4gIC8vICAgICByZXR1cm4geWFyZ3NcbiAgLy8gICAgICAgLnBvc2l0aW9uYWwoJ3ZpZXduYW1lJywge1xuICAvLyAgICAgICAgIGRlc2NyaWJlOiBgXCJ0aGXCt3ZpZXcnc8K3bmFtZVwiYCxcbiAgLy8gICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgLy8gICAgICAgfSlcbiAgLy8gICAgICAgLnBvc2l0aW9uYWwoJ3ZpZXdyZWdleCcsIHtcbiAgLy8gICAgICAgICBkZXNjcmliZTogYFwidGhlIHZpZXcncyByZWd1bGFyIGV4cHJlc3Npb24gdG8gc2VsZWN0IGpvYnNcImAsXG4gIC8vICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gIC8vICAgICAgIH0pXG4gIC8vICAgfSxcbiAgLy8gICAoYXJndikgPT4ge1xuICAvLyAgICAgY29uc3QgYmFzZVVSTCA9IGFyZ3YuYmFzZVVybCBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHVzZXIgPSBhcmd2LnVzZXIgYXMgc3RyaW5nXG4gIC8vICAgICBjb25zdCB0b2tlbiA9IGFyZ3YudG9rZW4gYXMgc3RyaW5nXG4gIC8vICAgICBKZW5raW5zSGlnaGxldmVsLm9mKGJhc2VVUkwsIHVzZXIsIHRva2VuKVxuICAvLyAgICAgICAuY3JlYXRlTGlzdFZpZXdXaXRoUmVnRXgoYXJndi52aWV3bmFtZSBhcyBzdHJpbmcsIGFyZ3Yudmlld3JlZ2V4IGFzIHN0cmluZylcbiAgLy8gICAgICAgLnRoZW4oKG5hbWUpID0+IGNvbnNvbGUubG9nKGBjcmVhdGVkIHZpZXcgJHtuYW1lfWApKVxuICAvLyAgIH0sXG4gIC8vIClcbiAgLy8gLmNvbW1hbmQoXG4gIC8vICAgJ2xpc3Qtdmlld3MnLFxuICAvLyAgICdsaXN0IHZpZXdzJyxcbiAgLy8gICAoeWFyZ3MpID0+IHlhcmdzLFxuICAvLyAgIChhcmd2KSA9PiB7XG4gIC8vICAgICBjb25zdCBiYXNlVVJMID0gYXJndi5iYXNlVXJsIGFzIHN0cmluZ1xuICAvLyAgICAgY29uc3QgdXNlciA9IGFyZ3YudXNlciBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHRva2VuID0gYXJndi50b2tlbiBhcyBzdHJpbmdcbiAgLy8gICAgIEplbmtpbnMub2YoYmFzZVVSTCwgdXNlciwgdG9rZW4pXG4gIC8vICAgICAgIC5saXN0Vmlld3MoKVxuICAvLyAgICAgICAudGhlbigodmlld3MpID0+IHZpZXdzLmZvckVhY2gocHJpbnRsbikpXG4gIC8vICAgfSxcbiAgLy8gKVxuICAvLyAuY29tbWFuZChcbiAgLy8gICAnZGVsZXRlLXZpZXcgW3ZpZXduYW1lXScsXG4gIC8vICAgJ2RlbGV0ZSB2aWV3IGJ5IG5hbWUnLFxuICAvLyAgICh5YXJncykgPT4ge1xuICAvLyAgICAgcmV0dXJuIHlhcmdzLnBvc2l0aW9uYWwoJ3ZpZXduYW1lJywge1xuICAvLyAgICAgICBkZXNjcmliZTogYFwidGhlwrd2aWV3J3PCt25hbWVcImAsXG4gIC8vICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAvLyAgICAgfSlcbiAgLy8gICB9LFxuICAvLyAgIChhcmd2KSA9PiB7XG4gIC8vICAgICBjb25zdCBiYXNlVVJMID0gYXJndi5iYXNlVXJsIGFzIHN0cmluZ1xuICAvLyAgICAgY29uc3QgdXNlciA9IGFyZ3YudXNlciBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHRva2VuID0gYXJndi50b2tlbiBhcyBzdHJpbmdcbiAgLy8gICAgIEplbmtpbnMub2YoYmFzZVVSTCwgdXNlciwgdG9rZW4pXG4gIC8vICAgICAgIC5kZWxldGVWaWV3KGFyZ3Yudmlld25hbWUgYXMgc3RyaW5nKVxuICAvLyAgICAgICAudGhlbigobmFtZSkgPT4gcHJpbnRsbihgZGVsZXRlZCB2aWV3IHdpdGggbmFtZSBcIiR7bmFtZX1cImApKVxuICAvLyAgIH0sXG4gIC8vIClcbiAgLy8gLmNvbW1hbmQoXG4gIC8vICAgJ2RlbGV0ZS1hbGwtdmlld3MnLFxuICAvLyAgICdkZWxldGUgYWxsIHZpZXdzJyxcbiAgLy8gICAoeWFyZ3MpID0+IHlhcmdzLFxuICAvLyAgIChhcmd2KSA9PiB7XG4gIC8vICAgICBjb25zdCBiYXNlVVJMID0gYXJndi5iYXNlVXJsIGFzIHN0cmluZ1xuICAvLyAgICAgY29uc3QgdXNlciA9IGFyZ3YudXNlciBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHRva2VuID0gYXJndi50b2tlbiBhcyBzdHJpbmdcbiAgLy8gICAgIEplbmtpbnNIaWdobGV2ZWwub2YoYmFzZVVSTCwgdXNlciwgdG9rZW4pXG4gIC8vICAgICAgIC5kZWxldGVBbGxWaWV3cygpXG4gIC8vICAgICAgIC50aGVuKChjb3VudCkgPT4gcHJpbnRsbihgZGVsZXRlZCAke2NvdW50fSB2aWV3c2ApKVxuICAvLyAgIH0sXG4gIC8vIClcbiAgLy8gLmNvbW1hbmQoXG4gIC8vICAgJ2xpc3Qtam9icycsXG4gIC8vICAgJ2xpc3Qgam9icycsXG4gIC8vICAgKHlhcmdzKSA9PiB5YXJncyxcbiAgLy8gICAoYXJndikgPT4ge1xuICAvLyAgICAgY29uc3QgYmFzZVVSTCA9IGFyZ3YuYmFzZVVybCBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHVzZXIgPSBhcmd2LnVzZXIgYXMgc3RyaW5nXG4gIC8vICAgICBjb25zdCB0b2tlbiA9IGFyZ3YudG9rZW4gYXMgc3RyaW5nXG4gIC8vICAgICBKZW5raW5zLm9mKGJhc2VVUkwsIHVzZXIsIHRva2VuKVxuICAvLyAgICAgICAubGlzdEpvYnMoKVxuICAvLyAgICAgICAudGhlbigoam9icykgPT4gam9icy5mb3JFYWNoKHByaW50bG4pKVxuICAvLyAgIH0sXG4gIC8vIClcbiAgLy8gLmNvbW1hbmQoXG4gIC8vICAgJ2RlbGV0ZS1qb2IgW2pvYm5hbWVdJyxcbiAgLy8gICAnZGVsZXRlIGpvYiBieSBuYW1lJyxcbiAgLy8gICAoeWFyZ3MpID0+IHtcbiAgLy8gICAgIHJldHVybiB5YXJncy5wb3NpdGlvbmFsKCdqb2JuYW1lJywge1xuICAvLyAgICAgICBkZXNjcmliZTogYFwidGhlwrdqb2Inc8K3bmFtZVwiYCxcbiAgLy8gICAgICAgdHlwZTogJ3N0cmluZycsXG4gIC8vICAgICB9KVxuICAvLyAgIH0sXG4gIC8vICAgKGFyZ3YpID0+IHtcbiAgLy8gICAgIGNvbnN0IGJhc2VVUkwgPSBhcmd2LmJhc2VVcmwgYXMgc3RyaW5nXG4gIC8vICAgICBjb25zdCB1c2VyID0gYXJndi51c2VyIGFzIHN0cmluZ1xuICAvLyAgICAgY29uc3QgdG9rZW4gPSBhcmd2LnRva2VuIGFzIHN0cmluZ1xuICAvLyAgICAgSmVua2lucy5vZihiYXNlVVJMLCB1c2VyLCB0b2tlbilcbiAgLy8gICAgICAgLmRlbGV0ZUpvYihhcmd2LmpvYm5hbWUgYXMgc3RyaW5nKVxuICAvLyAgICAgICAudGhlbigobmFtZSkgPT4gcHJpbnRsbihgZGVsZXRlZCBqb2Igd2l0aCBuYW1lIFwiJHtuYW1lfVwiYCkpXG4gIC8vICAgfSxcbiAgLy8gKVxuICAvLyAuY29tbWFuZChcbiAgLy8gICAnY3JlYXRlLWpvYiBbam9ibmFtZV0gW3NjcmlwdF0nLFxuICAvLyAgICdjcmVhdGUgcGlwZWxpbmUgam9iJyxcbiAgLy8gICAoeWFyZ3MpID0+IHtcbiAgLy8gICAgIHJldHVybiB5YXJnc1xuICAvLyAgICAgICAucG9zaXRpb25hbCgnam9ibmFtZScsIHtcbiAgLy8gICAgICAgICBkZXNjcmliZTogYFwidGhlwrdqb2Inc8K3bmFtZVwiYCxcbiAgLy8gICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgLy8gICAgICAgfSlcbiAgLy8gICAgICAgLnBvc2l0aW9uYWwoJ3NjcmlwdCcsIHtcbiAgLy8gICAgICAgICBkZXNjcmliZTogYFwidGhlIGpvYidzIHNjcmlwdFwiYCxcbiAgLy8gICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgLy8gICAgICAgfSlcbiAgLy8gICB9LFxuICAvLyAgIChhcmd2KSA9PiB7XG4gIC8vICAgICBjb25zdCBiYXNlVVJMID0gYXJndi5iYXNlVXJsIGFzIHN0cmluZ1xuICAvLyAgICAgY29uc3QgdXNlciA9IGFyZ3YudXNlciBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHRva2VuID0gYXJndi50b2tlbiBhcyBzdHJpbmdcbiAgLy8gICAgIEplbmtpbnNIaWdobGV2ZWwub2YoYmFzZVVSTCwgdXNlciwgdG9rZW4pXG4gIC8vICAgICAgIC5jcmVhdGVKb2IoYXJndi5qb2JUZW1wbGF0ZSBhcyBzdHJpbmcsIGFyZ3Yuam9ibmFtZSBhcyBzdHJpbmcsIGFyZ3Yuc2NyaXB0IGFzIHN0cmluZylcbiAgLy8gICAgICAgLnRoZW4oKG5hbWUpID0+IGNvbnNvbGUubG9nKGBjcmVhdGVkIGpvYiBcIiR7bmFtZX1cImApKVxuICAvLyAgIH0sXG4gIC8vIClcbiAgLy8gLmNvbW1hbmQoXG4gIC8vICAgJ3N5bmMtam9icyBbcGF0aF0nLFxuICAvLyAgICdjcmVhdGUvdXBkYXRlIGpvYnMgZm9yIGFsbCBbW0plbmtpbnNmaWxlXV1zIGluIHBhdGgnLFxuICAvLyAgICh5YXJncykgPT4ge1xuICAvLyAgICAgcmV0dXJuIHlhcmdzLnBvc2l0aW9uYWwoJ3BhdGgnLCB7XG4gIC8vICAgICAgIGRlc2NyaWJlOiBgXCJ0aGXCt3BhdGhcImAsXG4gIC8vICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAvLyAgICAgfSlcbiAgLy8gICB9LFxuICAvLyAgIChhcmd2KSA9PiB7XG4gIC8vICAgICBjb25zdCBiYXNlVVJMID0gYXJndi5iYXNlVXJsIGFzIHN0cmluZ1xuICAvLyAgICAgY29uc3QgdXNlciA9IGFyZ3YudXNlciBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHRva2VuID0gYXJndi50b2tlbiBhcyBzdHJpbmdcbiAgLy8gICAgIEplbmtpbnNIaWdobGV2ZWwub2YoYmFzZVVSTCwgdXNlciwgdG9rZW4pLnN5bmNKb2JzKFxuICAvLyAgICAgICBhcmd2Lm5hbWVQcmVmaXggYXMgc3RyaW5nLFxuICAvLyAgICAgICBhcmd2LmpvYlRlbXBsYXRlIGFzIHN0cmluZyxcbiAgLy8gICAgICAgYXJndi5wYXRoIGFzIHN0cmluZyxcbiAgLy8gICAgIClcbiAgLy8gICAgIC8vIC50aGVuKChuYW1lKSA9PiBjb25zb2xlLmxvZyhgc3luY2VkIGpvYnMgXCIke25hbWV9XCJgKSlcbiAgLy8gICB9LFxuICAvLyApXG4gIC8vIC5jb21tYW5kKFxuICAvLyAgICdzeW5jLXZpZXdzIFtwYXRoXScsXG4gIC8vICAgJ2NyZWF0ZS91cGRhdGUgdmlld3MgZm9yIGFsbCBbW0plbmtpbnNmaWxlXV1zIGluIHBhdGgnLFxuICAvLyAgICh5YXJncykgPT4ge1xuICAvLyAgICAgcmV0dXJuIHlhcmdzLnBvc2l0aW9uYWwoJ3BhdGgnLCB7XG4gIC8vICAgICAgIGRlc2NyaWJlOiBgXCJ0aGXCt3BhdGhcImAsXG4gIC8vICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAvLyAgICAgfSlcbiAgLy8gICB9LFxuICAvLyAgIChhcmd2KSA9PiB7XG4gIC8vICAgICBjb25zdCBiYXNlVVJMID0gYXJndi5iYXNlVXJsIGFzIHN0cmluZ1xuICAvLyAgICAgY29uc3QgdXNlciA9IGFyZ3YudXNlciBhcyBzdHJpbmdcbiAgLy8gICAgIGNvbnN0IHRva2VuID0gYXJndi50b2tlbiBhcyBzdHJpbmdcbiAgLy8gICAgIEplbmtpbnNIaWdobGV2ZWwub2YoYmFzZVVSTCwgdXNlciwgdG9rZW4pLnN5bmNWaWV3cyhhcmd2Lm5hbWVQcmVmaXggYXMgc3RyaW5nLCBhcmd2LnBhdGggYXMgc3RyaW5nKVxuICAvLyAgICAgLy8gLnRoZW4oKG5hbWUpID0+IGNvbnNvbGUubG9nKGBzeW5jZWQgam9icyBcIiR7bmFtZX1cImApKVxuICAvLyAgIH0sXG4gIC8vIClcbiAgLy8gLm9wdGlvbigndmVyYm9zZScsIHtcbiAgLy8gICBhbGlhczogJ3YnLFxuICAvLyAgIHR5cGU6ICdib29sZWFuJyxcbiAgLy8gICBkZWZhdWx0OiBmYWxzZSxcbiAgLy8gICBkZXNjcmlwdGlvbjogJ1J1biB3aXRoIHZlcmJvc2UgbG9nZ2luZycsXG4gIC8vIH0pXG4gIC5vcHRpb24oJ2NvbmZpZ0ZpbGUnLCB7XG4gICAgdHlwZTogJ3N0cmluZycsXG4gICAgZGVmYXVsdDogREVGQVVMVF9DT05GSUdfRklMRSxcbiAgICBkZXNjcmlwdGlvbjogJ0NvbmZpZyBmaWxlIChZYW1sKScsXG4gIH0pXG4gIC5vcHRpb24oJ2Jhc2VVcmwnLCB7XG4gICAgdHlwZTogJ3N0cmluZycsXG4gICAgZGVmYXVsdDogdW5kZWZpbmVkLFxuICAgIGRlc2NyaXB0aW9uOiAnSmVua2lucyBCYXNlIFVSTCcsXG4gIH0pXG4gIC5vcHRpb24oJ3VzZXInLCB7XG4gICAgdHlwZTogJ3N0cmluZycsXG4gICAgZGVmYXVsdDogdW5kZWZpbmVkLFxuICAgIGRlc2NyaXB0aW9uOiAnSmVua2lucyB1c2VybmFtZScsXG4gIH0pXG4gIC5vcHRpb24oJ3Rva2VuJywge1xuICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgIGRlZmF1bHQ6IHVuZGVmaW5lZCxcbiAgICBkZXNjcmlwdGlvbjogJ0plbmtpbnMgYXV0aGVudGljYXRpb24gdG9rZW4nLFxuICB9KVxuICAub3B0aW9uKCdqb2JUZW1wbGF0ZScsIHtcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBkZWZhdWx0OiB1bmRlZmluZWQsXG4gICAgZGVzY3JpcHRpb246ICd0aGUgcGlwZWxpbmUgam9iIHRlbXBsYXRlIHRvIGNsb25lLCB3aGVuIGNyZWF0aW5nIG5ldyBqb2JzJyxcbiAgfSlcbiAgLm9wdGlvbignbmFtZVByZWZpeCcsIHtcbiAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICBkZWZhdWx0OiB1bmRlZmluZWQsXG4gICAgZGVzY3JpcHRpb246ICd0aGUgbmFtZSBwcmVmaXggdG8gdXNlIHdoZW4gbmFtaW5nIGpvYnMgYW5kIHZpZXdzIGJhc2VkIG9uIGRpcmVjdG9yaWVzJyxcbiAgfSlcbiAgLnBhcnNlKClcbiJdfQ==