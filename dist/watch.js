"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.watch = void 0;
const chokidar = require("chokidar");
const log = console.debug.bind(console);
function watch(workingDir, glob, handlers) {
    const watcher = chokidar.watch(glob, {
        ignored: /(^|[\/\\])\../,
        persistent: true,
        cwd: workingDir,
    });
    watcher
        .on('change', (path) => handlers.change ? handlers.change(workingDir, path) : log(`File ${path} in ${workingDir} has been changed`));
}
exports.watch = watch;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2F0Y2guanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvd2F0Y2gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUNBQW9DO0FBR3BDLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBUXZDLFNBQWdCLEtBQUssQ0FBQyxVQUFrQixFQUFFLElBQVksRUFBRSxRQUEyQjtJQUVqRixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRTtRQUNuQyxPQUFPLEVBQUUsZUFBZTtRQUN4QixVQUFVLEVBQUUsSUFBSTtRQUNoQixHQUFHLEVBQUUsVUFBVTtLQUNoQixDQUFDLENBQUE7SUFFRixPQUFPO1NBRUosRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLElBQVksRUFBRSxFQUFFLENBQzdCLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLE9BQU8sVUFBVSxtQkFBbUIsQ0FBQyxDQUM1RyxDQUFBO0FBRUwsQ0FBQztBQWRELHNCQWNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2hva2lkYXIgZnJvbSAnY2hva2lkYXInXG5cbi8vIHNvbWV0aGluZyB0byB1c2UgYnkgZGVmYXVsdCB3aGVuIGV2ZW50cyBhcmUgcmVjZWl2ZWRcbmNvbnN0IGxvZyA9IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKVxuXG50eXBlIEhhbmRsZXJzID0ge1xuICBhZGQ6IChwYXRoOiBzdHJpbmcpID0+IHZvaWRcbiAgY2hhbmdlOiAod29ya2luZ0Rpcjogc3RyaW5nLCBwYXRoOiBzdHJpbmcpID0+IHZvaWRcbiAgdW5saW5rOiAocGF0aDogc3RyaW5nKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3YXRjaCh3b3JraW5nRGlyOiBzdHJpbmcsIGdsb2I6IHN0cmluZywgaGFuZGxlcnM6IFBhcnRpYWw8SGFuZGxlcnM+KSB7XG4gIC8vIGluaXRpYWxpemUgd2F0Y2hlci5cbiAgY29uc3Qgd2F0Y2hlciA9IGNob2tpZGFyLndhdGNoKGdsb2IsIHtcbiAgICBpZ25vcmVkOiAvKF58W1xcL1xcXFxdKVxcLi4vLCAvLyBpZ25vcmUgZG90ZmlsZXNcbiAgICBwZXJzaXN0ZW50OiB0cnVlLFxuICAgIGN3ZDogd29ya2luZ0RpcixcbiAgfSlcblxuICB3YXRjaGVyXG4gICAgLy8gLm9uKCdhZGQnLCBoYW5kbGVycy5hZGQgfHwgKChwYXRoKSA9PiBsb2coYEZpbGUgJHtwYXRofSBoYXMgYmVlbiBhZGRlZGApKSlcbiAgICAub24oJ2NoYW5nZScsIChwYXRoOiBzdHJpbmcpID0+XG4gICAgICBoYW5kbGVycy5jaGFuZ2UgPyBoYW5kbGVycy5jaGFuZ2Uod29ya2luZ0RpciwgcGF0aCkgOiBsb2coYEZpbGUgJHtwYXRofSBpbiAke3dvcmtpbmdEaXJ9IGhhcyBiZWVuIGNoYW5nZWRgKSxcbiAgICApXG4gIC8vIC5vbigndW5saW5rJywgaGFuZGxlcnMudW5saW5rIHx8ICgocGF0aCkgPT4gbG9nKGBGaWxlICR7cGF0aH0gaGFzIGJlZW4gcmVtb3ZlZGApKSlcbn1cbiJdfQ==